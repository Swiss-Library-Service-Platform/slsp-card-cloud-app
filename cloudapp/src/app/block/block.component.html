<div style="display: none;" class="user-header" fxLayout="row">
  <button mat-flat-button color="secondary" (click)="navigateBack()">
    <mat-icon inline=true>arrow_back_ios</mat-icon>
    {{ 'General.BackToMenu' | translate }}
  </button>
  <span>
    <mat-icon size="20">account_circle</mat-icon>
    <div class="user-header-text"> {{currentFullName}} </div>
  </span>
</div>
<br>

<!-- <h2> {{'Blocks.CurrentBlockTitle' | translate}}</h2> -->
<!-- Current Block -->
<div class="user-status">
  {{'Blocks.Status' | translate}}
  <span *ngIf="(currentUserBlocks | json) != ({} | json)" class="warning">
    {{'Blocks.ExistingBlocks' | translate}}
  </span>
  <span *ngIf="(currentUserBlocks | json) == ({} | json)">
    {{'Blocks.NoBlocks' | translate}}
  </span>
</div>
<br>

<!-- Double Registration -->
<mat-card class="mat-card-with-info">
  <mat-card-header>
    <mat-card-title>
      {{'Blocks.DoubleRegistrations' | translate}}
      <button class="info-button" mat-flat-button (click)="collapsedDouble=!collapsedDouble">
        <mat-icon>info</mat-icon>
      </button>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-divider></mat-divider>
    <br>
    <div *ngIf="!collapsedDouble" style="font-style: italic;">
      {{'Blocks.DoubleRegistrationsDescription' | translate}}
      <br><br>
    </div>

    <div *ngIf="currentUserBlocks['02']">
      <b> {{'Blocks.CreatedOn' | translate}} </b> {{getDateString(currentUserBlocks['02']['created_date'])}} <br>
      <b> {{ 'Blocks.ExpiringOn' | translate }} </b>
      <span *ngIf="currentUserBlocks['02']['expiry_date']"> {{
        getDateString(currentUserBlocks['02']['expiry_date']) }} </span>
      <span *ngIf="!currentUserBlocks['02']['expiry_date']"> {{ 'Blocks.NoExpiringDate' | translate }} </span>
      <br>
      <b> {{'Blocks.Note' | translate}}: </b> {{currentUserBlocks['02']['block_note']}}
    </div>
    <mat-action-row class="mat-action-row-single" *ngIf="currentUserBlocks['02']">
      <button mat-flat-button color="secondary" (click)="removeUserBlock('02')">
        <mat-icon inline=true>delete</mat-icon>{{'Blocks.RemoveBlock' | translate}}
      </button>
    </mat-action-row>
    <mat-action-row *ngIf="!currentUserBlocks['02']">
      <mat-form-field>
        <mat-label>{{'Blocks.Comment' | translate}}</mat-label>
        <input [(ngModel)]='commentDouble' matInput #first>
      </mat-form-field>
      <button mat-flat-button class="slsp-purple-button" (click)="addUserBlock('02', commentDouble)">
        <mat-icon inline=true>add</mat-icon>{{'Blocks.AddBlock' | translate}}
      </button>
    </mat-action-row>
  </mat-card-content>
</mat-card>


<!-- Wrong Address 03 -->
<mat-card class="mat-card-with-info">
  <mat-card-header>
    <mat-card-title>
      {{'Blocks.WrongAddress' | translate}}
      <button class="info-button" mat-flat-button (click)="collapsedWrong=!collapsedWrong">
        <mat-icon>info</mat-icon>
      </button>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-divider></mat-divider>
    <br>
    <div *ngIf="!collapsedWrong" style="font-style: italic;">
      {{'Blocks.WrongAddressDescription' | translate}}
      <br><br>
    </div>

    <div *ngIf="currentUserBlocks['03']">
      <b> {{'Blocks.CreatedOn' | translate}} </b> {{getDateString(currentUserBlocks['03']['created_date'])}} <br>
      <b> {{ 'Blocks.ExpiringOn' | translate }} </b>
      <span *ngIf="currentUserBlocks['03']['expiry_date']"> {{
        getDateString(currentUserBlocks['03']['expiry_date']) }} </span>
      <span *ngIf="!currentUserBlocks['03']['expiry_date']"> {{ 'Blocks.NoExpiringDate' | translate }} </span>
      <br>
      <b> {{'Blocks.Note' | translate}}: </b> {{currentUserBlocks['03']['block_note']}}
    </div>
    <div *ngIf="currentUserBlocks['03']">
      <br>
      <div class="warning" *ngIf="currentUser.getIsExternal()">
        {{'Blocks.address-block-external-info' | translate}}
      </div>
      <div class="warning" *ngIf="!currentUser.getIsExternal()">
        {{'Blocks.address-block-internal-info' | translate}}
      </div>
    </div>
    <mat-action-row class="mat-action-row-single" *ngIf="currentUserBlocks['03']">
      <button mat-flat-button color="secondary" (click)="removeUserBlock('03')">
        <mat-icon inline=true>delete</mat-icon>{{'Blocks.RemoveBlock' | translate}}
      </button>
    </mat-action-row>
    <mat-action-row *ngIf="!currentUserBlocks['03']">
      <mat-form-field>
        <mat-label>{{'Blocks.Comment' | translate}}</mat-label>
        <input [(ngModel)]='commentWrong' matInput #first>
      </mat-form-field>
      <button mat-flat-button class="slsp-purple-button" (click)="addUserBlock('03', commentWrong)">
        <mat-icon inline=true>add</mat-icon><span>{{'Blocks.AddBlock' | translate}}</span>
      </button>
    </mat-action-row>
  </mat-card-content>
</mat-card>

<!-- Global Block 09 -->
<mat-card class="mat-card-with-info">
  <mat-card-header>
    <mat-card-title>
      {{'Blocks.GlobalBlock' | translate}}
      <button class="info-button" mat-flat-button (click)="collapseGlobal=!collapseGlobal">
        <mat-icon>info</mat-icon>
      </button>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-divider></mat-divider>
    <br>
    <div *ngIf="!collapseGlobal" style="font-style: italic;">
      {{'Blocks.GlobalBlockDescription' | translate}}
      <br><br>
    </div>

    <div *ngIf="currentUserBlocks['09']">
      <b> {{'Blocks.CreatedOn' | translate}} </b> {{getDateString(currentUserBlocks['09']['created_date'])}} <br>
      <b> {{ 'Blocks.ExpiringOn' | translate }} </b>
      <span *ngIf="currentUserBlocks['09']['expiry_date']"> {{
        getDateString(currentUserBlocks['09']['expiry_date']) }} </span>
      <span *ngIf="!currentUserBlocks['09']['expiry_date']"> {{ 'Blocks.NoExpiringDate' | translate }} </span>
      <br>
      <b> {{'Blocks.GlobalBlockNote' | translate}}: </b> {{currentUserBlocks['09']['block_note']}}
    </div>
    <mat-action-row class="mat-action-row-single" *ngIf="currentUserBlocks['09']">
      <button mat-flat-button color="secondary" (click)="removeUserBlock('09')">
        <mat-icon inline=true>delete</mat-icon>{{'Blocks.RemoveBlock' | translate}}
      </button>
    </mat-action-row>
    <mat-action-row *ngIf="!currentUserBlocks['09']">
        <mat-form-field>
          <mat-label>{{'Blocks.GlobalBlockNote' | translate}}</mat-label>
          <input [(ngModel)]='commentGlobal' matInput #first>
        </mat-form-field>
        <button [disabled]="!commentGlobal" mat-flat-button class="slsp-purple-button" (click)="addUserBlock('09', commentGlobal)">
          <mat-icon inline=true>add</mat-icon><span>{{'Blocks.AddBlock' | translate}}</span>
        </button>
    </mat-action-row>
  </mat-card-content>
</mat-card>

<!-- New Account -->
<mat-card *ngIf="currentUserBlocks['08']" class="mat-card-with-info">
  <mat-card-header>
    <mat-card-title>
      {{'Blocks.NewAccount' | translate}}
      <button class="info-button" mat-flat-button (click)="collapsedNew=!collapsedNew">
        <mat-icon>info</mat-icon>
      </button>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-divider></mat-divider>
    <br>
    <div *ngIf="!collapsedNew" style="font-style: italic;">
      {{'Blocks.NewAccountDescription' | translate}}
      <br><br>
    </div>

    <div>
      <b> {{'Blocks.CreatedOn' | translate}} </b> {{getDateString(currentUserBlocks['08']['created_date'])}} <br>
      <b> {{ 'Blocks.ExpiringOn' | translate }} </b>
      <span *ngIf="currentUserBlocks['08']['expiry_date']"> {{
        getDateString(currentUserBlocks['08']['expiry_date']) }} </span>
      <span *ngIf="!currentUserBlocks['08']['expiry_date']"> {{ 'Blocks.NoExpiringDate' | translate }} </span>
      <br>
      <b> {{'Blocks.Note' | translate}}: </b> {{currentUserBlocks['08']['block_note']}}
    </div>

    <mat-action-row class="mat-action-row-single">
      <button mat-flat-button color="secondary" (click)="removeUserBlock('08')">
        <mat-icon inline=true>delete</mat-icon>{{'Blocks.RemoveBlock' | translate}}
      </button>
    </mat-action-row>
  </mat-card-content>
</mat-card>


<div class="loading-shade" *ngIf="loading">
  <mat-spinner diameter="50"></mat-spinner>
</div>